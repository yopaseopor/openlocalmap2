  <head>
  <!--MODIFICAR AQUÍ-->
    <title>OpenLocalMap</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!--MODIFICAR AQUÍ-->
	<meta property="og:title" content="OpenLocalMap" />
    <meta property="og:type" content="website" />
	<!--MODIFICAR AQUÍ-->
    <meta property="og:url" content="https://osm-catalan.github.io/openlocalmap" />
	<!--MODIFICAR AQUÍ-->
    <meta property="og:image" content="https://osm-catalan.github.io/openlocalmap/assets/img/preview.jpg" />
	<!--MODIFICAR AQUÍ-->
    <meta property="og:description" content="Mapa de Vilanova i la Geltrú amb cerca de punts d'interès i altra informació." />
    <link rel="shortcut icon" href="assets/img/favicon.ico"/>
    <link rel="stylesheet" href="assets/leaflet/leaflet.css" />
    <link rel="stylesheet" href="assets/css/Control.Loading.css" />
    <link rel="stylesheet" href="assets/css/Control.Geocoder.css" />
    <link rel="stylesheet" href="assets/css/leaflet.label.css" />
    <link rel="stylesheet" href="assets/css/leaflet.zoomhome.css" />

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/site.css">
    <link rel="stylesheet" href="assets/css/leaflet-sidebar.css" />
    <link rel="stylesheet" href="assets/print/easyPrint.css" />
    <link rel="stylesheet" href="assets/css/leaflet.elevation-0.0.4.css" />

    <link href="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.24.0/L.Control.Locate.css" rel="stylesheet" />
    <!--[if lt IE 9]>
	<link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.21.0/L.Control.Locate.ie.css' rel='stylesheet' />
    <![endif]-->
  </head>

  <body>
    <div id="sidebar" class="sidebar collapsed">
      <!-- Nav tabs -->
      <ul class="sidebar-tabs" role="tablist">
	<li><a href="#search" role="tab"><i class="fa fa-search"></i></a></li>
	<li><a href="#home" role="tab"><i class="fa fa-map-marker"></i></a></li>
	<li><a href="#routes" role="tab"><i class="fa fa-compass"></i></a></li>
	<li><a href="#wikipedia" role="tab"><i class="fa fa-book"></i></a></li>
		<!--MODIFICAR AQUÍ-->
	<li><a href="#comments" role="tab"><i class="fa fa-comments-o"></i></a></li>
	<li><a href="#parking" role="tab"><i class="fa fa-car"></i></a></li>
	<li><a href="#mapillary" role="tab"><i class="fa fa-road"></i></a></li>
	<li><a href="#links" role="tab"><i class="fa fa-link"></i></a></li>
	<li><a href="#developer" role="tab"><i class="fa fa-code"></i></a></li>
	<li><a href="#language" role="tab"><i class="fa fa-language"></i></a></li>
	<li><a href="#about" role="tab"><i class="fa fa-info-circle"></i></a></li>
      </ul>

      <!-- Tab panes -->
      <div class="sidebar-content active">

	<!--PUNTS D'INTERÈS-->
	<A NAME="home_init"></A>
	<div class="sidebar-pane" id="home">
	  <div class="close-button"><span class="fa fa-close" onclick="javascript: sidebar.close()"></span>
	  </div>
	  <center><button style="background:#2a2a2a; color:white; padding:5px;" class="fa fa-support"
          onClick="location.href='#help_home'"> Ajuda (PDI)</button></center>
	  <h1 data-i18n="home_title">Punts d'interès</h1>
	  <p data-i18n="home_description">Seleccioneu els punts que voleu visualitzar al mapa i després tanqueu aquest panell fent clic a
           la <b>«X»</b> per poder visualitzar-lo més bé.</p>
	  <p class="permalink">
	  <span class="fa fa-link"></span>
	  <a id="permalink" href="#" data-i18n="home_permalink">Comparteix aquest mapa (enllaç)</a>
	  </p>
	  <center>
	    <button id="start-query-btn" class="fa fa-search manual-query-btn" type="button" onclick="manualPoiQuery();" data-i18n="poi_manual_search">Carrega punts d'interès</button>
	    <button id="stop-query-btn" class="fa fa-stop manual-stop-btn" type="button" onclick="stopQuery();">Atura consulta</button>
	    <br><small class="manual-query-note" data-i18n="poi_manual_note">Les consultes es fan manualment per evitar sobrecàrrega dels servidors</small>
	  </center>
	  <div id="pois"></div>
	  <center>
	    <button class="fa fa-search manual-query-btn" type="button" onclick="manualPoiQuery();" data-i18n="poi_manual_search">Carrega punts d'interès</button>
	    <button class="fa fa-stop manual-stop-btn" type="button" onclick="stopQuery();">Atura consulta</button>
	    <br><small class="manual-query-note" data-i18n="poi_manual_note">Les consultes es fan manualment per evitar sobrecàrrega dels servidors</small>
	  </center>
	  <!--Home - ajuda -->
	  <br><hr width="90%">
	  <A NAME="help_home"></A>
	  <h1 data-i18n="home_help_title"><span class="fa fa-support"></span> Ajuda</h1>
	  <p style="text-align:justify; margin-right:5px;" data-i18n="home_help_text1">Des d'aquesta secció podeu seleccionar els punts
	  d'interès que voleu visualitzar al mapa. Cal que seleccioneu tots aquells punts que desitgeu,
	  marcant-ne la casella corresponent:</p>
	  <center><img src="assets/img/help/pdis.png" width="80%"></center>
	  <p style="text-align:justify; margin-right:5px;" data-i18n="home_help_text2">Quan els hàgiu seleccionat podeu tancar el panell
           fent clic sobre la <b>«X»</b> que hi ha al capdamunt a l'esquerra, i en uns segons (en funció de la
           connexió a Internet) us apareixeran els punts d'interès sobre el mapa:</p>
	  <center><img src="assets/img/help/pdis2.png" width="90%"></center>
	  <p style="text-align:justify; margin-right:5px;" data-i18n="home_help_text3">Ara podreu seleccionar la icona de qualsevol dels
	   punts d'interès per veure'n més informació (de la base de dades d'OSM). Alguns camps com
	   el correu electrònic o el lloc web són enllaços que es poden seguir, i podreu trucar directament al
	   telèfon de contacte si utilitzeu el mapa des d'un telèfon mòbil:</p>
	  <center><img src="assets/img/help/popup.png" width="90%"></center>
	  <p style="text-align:justify; margin-right:5px;" data-i18n="home_help_text4">Si us aparegués un missatge com aquest:</p>
	  <center><img src="assets/img/help/zoom.png" width="100%"></center>
	  <p style="text-align:justify; margin-right:5px;" data-i18n="home_help_text5">Significa que no s'ha arribat al nivell mínim
	   d'apropament per visualitzar les icones, i per tant cal que us acosteu més al mapa (amb el botó
            <b>«+»</b> del mapa, per exemple).</p>
	  <p style="text-align:justify; margin-right:5px;" data-i18n="home_help_text6">Si seguiu l'enllaç <b>«Informació al detall
           (expert)»</b> que tenen tots els punts d'interès, s'obrirà automàticament el panell «Expert» amb la
           informació de les etiquetes del punt d'interès a OpenStreetMap, i també enllaços per visualitzar
            el punt d'interès a OSM o inclús per editar-lo:</p>
	  <center><img src="assets/img/help/expert.png" width="90%"></center>
	  <br>
	  <center><button style="background:#2a2a2a; color:white; padding:5px;" class="fa fa-arrow-up"
          onClick="location.href='#home_init'" data-i18n="home_help_back"> Inici</button></center>
	</div>

	<!--CERCA-->
	<A NAME="search_init"></A>
	<div class="sidebar-pane" id="search">
	  <div class="close-button"><span class="fa fa-close" onclick="javascript: sidebar.close()"></span>
          </div>
	  <center><button style="background:#2a2a2a; color:white; padding:5px;" class="fa fa-support"
          onClick="location.href='#help_search'"> Ajuda (cerca)</button></center>
	  <!--Cerca local-->
	  <!--MODIFICAR AQUÍ-->
	  <h1 data-i18n="search_local_title">Cerca local<br><small data-i18n="search_local_subtitle">a Vilanova i la Geltrú</small></h1>
	  <center><p><font style="font-family: verdana; font-size: 8px;" data-i18n="search_local_description">Cerqueu una adreça, un comerç, un nom
           de casa, una masia, una font...</font></p>
          <p><input type="text" name="addr" value="" id="addr" class="search-input" placeholder="Introduïu la vostra cerca..." /></p>
          <p><button class="fa fa-search" type="button" onclick="addr_search();" data-i18n="search_button"> Cerca</button> <button class="fa fa-trash" type="button" onclick="clear_layer2();" data-i18n="search_clear_button"> Neteja</button></p></center>
	  <div id="results"/>
	  </div>

          <br><hr width="90%">

	  <!--Cerca global-->
	  <h1 data-i18n="search_global_title">Cerca global<br><small data-i18n="search_global_subtitle">a tot el Món</small></h1>
	  <center><p><font style="font-family: verdana; font:size: 8px;" data-i18n="search_global_description">Cerqueu una població, una adreça, un
           comerç...</font><br><br>
	  <input type="text" name="addr2" value="" id="addr2" class="search-input" placeholder="Introduïu la vostra cerca..." /><br>
	  <button class="fa fa-search" type="button" onclick="addr_search2();" data-i18n="search_button"> Cerca</button> <button class="fa
           fa-trash" type="button" onclick="clear_layer3();" data-i18n="search_clear_button"> Neteja</button></p></center>
	  <div id="results2"/>
	  </div>

     	  <br><hr width="90%">

	  <!--Cerca - ajuda -->
	  <A NAME="help_search"></A>
	  <h1 data-i18n="search_help_title"><span class="fa fa-support"></span> Ajuda</h1>
	  <!--MODIFICAR AQUÍ-->
	  <p style="text-align:justify; margin-right:5px;" data-i18n="search_help_text1">Des d'aquesta secció podeu fer cerques tan
          limitades a la zona de Vilanova i la Geltrú (cerca local) com a qualsevol lloc del Món. Per fer-ho
           cal introduir la vostra cerca a la caixa:</p>
	  <center><img src="assets/img/help/cerca.png" width="60%"></center>
	  <p style="text-align:justify; margin-right:5px;" data-i18n="search_help_text2">A continuació cal prémer el botó «Cerca» i
          apareixeran un màxim de cinc resultats (a la cerca global en seran deu), com es mostra en aquesta
           imatge:</p>
	  <center><img src="assets/img/help/cerca1.png" width="90%"></center>
	  <p style="text-align:justify; margin-right:5px;" data-i18n="search_help_text3">Finalment només cal que seleccioneu el resultat que
	  voleu visualitzar al mapa, i si no us agrada, podeu tornar a obrir aquesta secció per seleccionar-ne
	  altre. Els resultats es mostraran a la cerca global en cercles verds els nodes i en caixes vermelles
          les vies, i a la cerca global en cercles i caixes blaves.</p>
	  <center><img src="assets/img/help/cerca2.png" width="90%"></center>
	  <p style="text-align:justify; margin-right:5px;" data-i18n="search_help_text4">Les caixes i els cercles que es dibuixen al mapa es
	  poden fer desaparèixer prement el botó «Neteja».</p>
	  <br>
	  <center><button style="background:#2a2a2a; color:white; padding:5px;" class="fa fa-arrow-up"
          onClick="location.href='#search_init'" data-i18n="search_help_back"> Inici</button></center>
	</div>

	<!--MAPILLARY-->
	<A NAME="mapillary_init"></A>
	<div class="sidebar-pane" id="mapillary">
	  <div class="close-button"><span class="fa fa-close" onclick="javascript: sidebar.close()"></span>
	  </div>
	  <center><button style="background:#2a2a2a; color:white; padding:5px;" class="fa fa-support"
          onClick="location.href='#help_mapillary'"> Ajuda (Mapillary)</button></center>
	  <h1 data-i18n="mapillary_title">Mapillary</h1>
	  <center><img src="assets/img/mapillary.png" width="50" height="50">
	  <p data-i18n="mapillary_description"><b>Mapillary</b> és l'Street View lliure, està realitzat per voluntaris i les imatges es
           distribueixen sota una llicència <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.ca"
           target="_blank">CC BY-SA 4.0</a>.</p>
	  <p><button type="button" onclick="refreshMapillary();" data-i18n="mapillary_random">Troba 10 llocs a l'atzar a Mapillary</button>
          </p>
	  <p>Per trobar nous llocs a Mapillary, canvieu la vista del mapa i torneu a fer clic al botó.</p>
	  <p><button type="button" onclick="clear_layer();" data-i18n="mapillary_clear">Neteja els marcadors de Mapillary</button></p>
	  </center>

	  <br><hr width="90%">
	  
	  
	  

	  <!--Mapillary - ajuda -->
	  <A NAME="help_mapillary"></A>
	  <h1 data-i18n="mapillary_help_title"><span class="fa fa-support"></span> Ajuda</h1>
	  <p style="text-align:justify; margin-right:5px;" data-i18n="mapillary_help_text1">Des d'aquesta secció podeu trobar deu punts a
	   l'atzar de la vostra vista del mapa, en els que es disposa de fotografia a Mapillary. Si us
	   interessa localitzar fotografies en una zona concreta, és recomanable apropar-vos el màxim a
	   aquella zona abans de fer clic a «Troba 10 llocs a l'atzar a Mapillary». Després de fer-ho us
	   apareixeran 10 marcadors blaus al mapa:</p>
	  <center><img src="assets/img/help/mapillary1.png" width="70%"></center>
	  <p style="text-align:justify; margin-right:5px;" data-i18n="mapillary_help_text2">En seleccionar un dels marcadors us apareixerà una
	   bafarada amb la fotografia a Mapillary de la zona:</p>
	  <center><img src="assets/img/help/mapillary2.png" width="70%"></center>
	  <p style="text-align:justify; margin-right:5px;" data-i18n="mapillary_help_text3">Si seguiu l'enllaç <b>«Continua la seqüència a
	   Mapillary»</b> s'obrirà la pàgina de Mapillary en una altra pestanya, en el punt exacte on éreu. I
	   des d'allà podreu resseguir tota la ruta:</p>
	  <center><img src="assets/img/help/mapillary_web.png" width="90%"></center>
	  <br>
	  <center><button style="background:#2a2a2a; color:white; padding:5px;" class="fa fa-arrow-up"
          onClick="location.href='#mapillary_init'" data-i18n="mapillary_help_back"> Inici</button></center>
	</div>
	
	<!--RUTES-->
	<A NAME="rutes_init"></A>
	<div class="sidebar-pane" id="routes">
	  <div class="close-button"><span class="fa fa-close" onclick="javascript: sidebar.close()"></span>
	  </div>
	  <center><button style="background:#2a2a2a; color:white; padding:5px;" class="fa fa-support"
          onClick="location.href='#help_rutes'" data-i18n="routes_help_button"> Ajuda (rutes)</button></center>
  <h1 id="routes-title" data-i18n="routes_title">Rutes</h1>
  <p style="text-align:justify; margin-right:5px;" data-i18n="routes_description">Les rutes han estat creades a partir de les dades
   d'OpenStreetMap amb
  <a href="https://graphhopper.com/maps/">GraphHopper</a>.</p>

  <!-- Route type buttons -->
  <center style="margin-bottom: 15px;">
    <div style="text-align: center;">
      <button class="route-type-btn fa fa-walking" type="button" onclick="loadWalkingRoutes()" style="background:#2a2a2a; color:white; padding:8px 12px; border:none; border-radius:3px; cursor:pointer; margin: 5px;"> Rutes a peu</button>
      <button class="route-type-btn fa fa-bicycle" type="button" onclick="loadBikingRoutes()" style="background:#2a2a2a; color:white; padding:8px 12px; border:none; border-radius:3px; cursor:pointer; margin: 5px;"> Rutes en bicicleta</button>
    </div>

    <!-- Public transport type buttons -->
    <div style="text-align: center; margin-top: 10px;">
      <h4 style="margin: 5px 0; color: #666; font-size: 14px;">Transport públic:</h4>
      <button class="transport-type-btn" type="button" onclick="loadSpecificTransportRoutes('bus')" title="Autobusos" style="background:#2a2a2a; color:white; padding:6px 8px; border:none; border-radius:3px; cursor:pointer; margin: 2px; font-size: 12px;"><i class="fa fa-bus"></i> Bus</button>
      <button class="transport-type-btn" type="button" onclick="loadSpecificTransportRoutes('tram')" title="Tramvies" style="background:#2a2a2a; color:white; padding:6px 8px; border:none; border-radius:3px; cursor:pointer; margin: 2px; font-size: 12px;"><i class="fa fa-subway"></i> Tram</button>
      <button class="transport-type-btn" type="button" onclick="loadSpecificTransportRoutes('subway')" title="Metro" style="background:#2a2a2a; color:white; padding:6px 8px; border:none; border-radius:3px; cursor:pointer; margin: 2px; font-size: 12px;"><i class="fa fa-train"></i> Metro</button>
      <button class="transport-type-btn" type="button" onclick="loadSpecificTransportRoutes('train')" title="Trens" style="background:#2a2a2a; color:white; padding:6px 8px; border:none; border-radius:3px; cursor:pointer; margin: 2px; font-size: 12px;"><i class="fa fa-train"></i> Tren</button>
      <button class="transport-type-btn" type="button" onclick="loadSpecificTransportRoutes('light_rail')" title="Tramvia lleuger" style="background:#2a2a2a; color:white; padding:6px 8px; border:none; border-radius:3px; cursor:pointer; margin: 2px; font-size: 12px;"><i class="fa fa-subway"></i> Tram lleuger</button>
      <button class="transport-type-btn fa fa-bus" type="button" onclick="loadPublicTransportRoutes()" title="Tots els transports públics" style="background:#007acc; color:white; padding:6px 8px; border:none; border-radius:3px; cursor:pointer; margin: 2px; font-size: 12px;"> Tots</button>
    </div>

    <small style="color: #666; font-size: 11px;" data-i18n="routes_manual_note">Les consultes es fan manualment per evitar sobrecàrrega dels servidors</small>
  </center>

  <!-- Route categories -->
  <div id="routes-content">
    <!-- Content will be populated dynamically -->
  </div>

	  <!-- Route details -->
	  <div id="route-details" style="display: none;">
	    <hr>
	    <h3 id="route-detail-title"></h3>
	    <p id="route-detail-description"></p>
    <div class="route-info">
      <div class="route-info-item"><strong data-i18n="routes_detail_distance">Distància:</strong> <span id="route-distance"></span></div>
      <div class="route-info-item"><strong data-i18n="routes_detail_elevation">Desnivell:</strong> <span id="route-elevation"></span></div>
      <div class="route-info-item"><strong data-i18n="routes_detail_difficulty">Dificultat:</strong> <span id="route-difficulty"></span></div>
      <div class="route-info-item"><strong data-i18n="routes_detail_duration">Durada estimada:</strong> <span id="route-duration"></span></div>
      <div class="route-info-item"><strong data-i18n="routes_detail_frequency">Freqüència:</strong> <span id="route-frequency"></span></div>
      <div class="route-info-item"><strong data-i18n="routes_detail_first_service">Primer servei:</strong> <span id="route-first-service"></span></div>
      <div class="route-info-item"><strong data-i18n="routes_detail_last_service">Últim servei:</strong> <span id="route-last-service"></span></div>
    </div>
	    <div id="route-stops" style="display: none;">
	      <h4 data-i18n="routes_stops_title">Parades:</h4>
	      <ul id="route-stops-list"></ul>
	    </div>
	    <div class="route-actions">
	      <button id="show-route-btn" class="fa fa-search" onclick="showSelectedRoute()" data-i18n="routes_show_route"> Mostra ruta</button>
	      <button id="clear-route-btn" class="fa fa-trash" onclick="clearRoute()" data-i18n="routes_clear_route"> Neteja</button>
	      <div id="route-download-link" style="margin-top: 10px;"></div>
	    </div>
	    <button onclick="hideRouteDetails()" style="margin-top: 10px;" data-i18n="routes_back_to_list">← Tornar al llistat</button>
	  </div>

	  <br><hr width="90%">

	  <!-- Rutes - ajuda -->
	  <A NAME="help_rutes"></A>
	  <h1 data-i18n="routes_help_title"><span class="fa fa-support"></span> Ajuda</h1>
	  <p style="text-align:justify; margin-right:5px;" data-i18n="routes_help_text1">Des d'aquesta secció podeu explorar les diferents rutes disponibles a la vostra ubicació actual. Les rutes es divideixen en categories:</p>
	  <ul style="text-align:left; margin-left:20px;">
	    <li><strong data-i18n="routes_help_walking_title">Rutes a peu:</strong> <span data-i18n="routes_help_walking_desc">Caminades i senderisme</span></li>
	    <li><strong data-i18n="routes_help_biking_title">Rutes en bicicleta:</strong> <span data-i18n="routes_help_biking_desc">Recorreguts per bicicleta</span></li>
	    <li><strong data-i18n="routes_help_transport_title">Transport públic:</strong> <span data-i18n="routes_help_transport_desc">Línies d'autobús i metro</span></li>
	  </ul>
	  <p style="text-align:justify; margin-right:5px;" data-i18n="routes_help_click_text">Feu clic en qualsevol ruta per veure'n els detalls, parades (si s'escau) i opcions per visualitzar-la al mapa.</p>
	  <br>
	  <center><button style="background:#2a2a2a; color:white; padding:5px;" class="fa fa-arrow-up"
          onClick="location.href='#rutes_init'" data-i18n="routes_help_back"> Inici</button></center>
	</div>


	<!--VIQUIPÈDIA-->
	<div class="sidebar-pane" id="wikipedia">
	  <div class="close-button"><span class="fa fa-close" onclick="javascript: sidebar.close()"></span>
	  </div>
	  <A NAME="IniciWiki"></A>
	  <!--MODIFICAR AQUÍ-->
	  <h1 id="wikipedia_title">Vilanova i la Geltrú a Wikidata</h1>
	  <center><p><button onclick="updateWikipediaContent();" id="wikipedia_reload">Actualitza</button></p></center>
	  <!--MODIFICAR AQUÍ-->
	  <div id="wikidata-content">
	    <p>Carregant informació de Wikidata...</p>
	  </div>
	  <center><a href="#IniciWiki" data-i18n="wikipedia_back">Torna a l'inici</a></p></center></p>
	  <script>
		function updateWikipediaContent() {
			var titleElement = document.getElementById('wikipedia_title');
			var reloadButton = document.getElementById('wikipedia_reload');
			var contentDiv = document.getElementById('wikidata-content');

			// Get current language
			var currentLang = currentLanguage || 'ca';
			var langNames = {ca: 'Wikidata', es: 'Wikidata', en: 'Wikidata'};
			var buttonTexts = {ca: 'Actualitza', es: 'Actualizar', en: 'Update'};

			titleElement.textContent = baseLocation.name.replace(/'/g, "\\'") + " a " + (langNames[currentLang] || 'Wikidata');
			reloadButton.textContent = buttonTexts[currentLang] || "Actualitza";

			contentDiv.innerHTML = "<p>" + (currentLang === 'es' ? 'Cargando información de Wikidata...' : currentLang === 'en' ? 'Loading Wikidata information...' : 'Carregant informació de Wikidata...') + "</p>";

			// Fetch Wikidata information
			fetchWikidataInfo(baseLocation, currentLang, function(data) {
				displayWikidataInfo(data, contentDiv, currentLang);
			}, function(error) {
				var errorMsgs = {
					ca: "Error carregant dades de Wikidata: ",
					es: "Error cargando datos de Wikidata: ",
					en: "Error loading Wikidata data: "
				};
				contentDiv.innerHTML = "<p>" + (errorMsgs[currentLang] || errorMsgs.ca) + error + "</p>";
			});
		}

		function fetchWikidataInfo(location, currentLang, successCallback, errorCallback) {
			var osmId = location.osm_id;
			var osmType = location.osm_type;

			if (osmId && osmType === 'relation' && (location.type === 'city' || location.type === 'municipality')) {
				// For municipalities with OSM relation ID, query Wikidata by P402 (OSM relation ID)
				var langOrder = currentLang + ",[AUTO_LANGUAGE],ca,en,es";
				var sparqlQuery = "SELECT ?item ?itemLabel WHERE { ?item wdt:P402 \"" + osmId + "\" . SERVICE wikibase:label { bd:serviceParam wikibase:language \"" + langOrder + "\". } }";
				var url = "https://query.wikidata.org/sparql?query=" + encodeURIComponent(sparqlQuery) + "&format=json";

				$.ajax({
					url: url,
					dataType: "json",
					success: function(data) {
						if (data.results.bindings.length > 0) {
							var qid = data.results.bindings[0].item.value.split('/').pop();
							fetchWikidataEntity(qid, successCallback, errorCallback);
						} else {
							// Fallback to search by name
							searchWikidataByName(location.name, currentLang, successCallback, errorCallback);
						}
					},
					error: function() {
						errorCallback("Error en la consulta SPARQL");
					}
				});
			} else {
				// For other locations, search by name
				searchWikidataByName(location.name, currentLang, successCallback, errorCallback);
			}
		}

		function searchWikidataByName(name, currentLang, successCallback, errorCallback) {
			// Extract main name by splitting on commas and taking first part
			var mainName = name.split(',')[0].trim();

			// Use current language for search with better fallback logic
			var searchLang = currentLang || 'ca';
			var fallbackLangs = ['ca', 'es', 'en'];

			// First, try to search in the current language
			var url = "https://www.wikidata.org/w/api.php?action=wbsearchentities&search=" + encodeURIComponent(mainName) + "&language=" + searchLang + "&limit=10&type=item&format=json&origin=*";

			$.ajax({
				url: url,
				dataType: "json",
				success: function(data) {
					var filteredResults = filterRelevantWikidataResults(data.search || [], mainName, currentLang);

					if (filteredResults.length > 0) {
						if (filteredResults.length === 1) {
							// Only one relevant result, proceed directly
							var qid = filteredResults[0].id;
							fetchWikidataEntity(qid, successCallback, errorCallback);
						} else {
							// Multiple relevant results, show selection
							showWikidataSelection(filteredResults, currentLang, successCallback, errorCallback);
						}
					} else {
						errorCallback(getTranslatedText("No s'ha trobat cap element a Wikidata", currentLang));
					}
				},
				error: function() {
					errorCallback(getTranslatedText("Error en la cerca a Wikidata", currentLang));
				}
			});
		}

		function filterRelevantWikidataResults(results, searchName, currentLang) {
			if (!results || results.length === 0) return [];

			// Filter out obviously irrelevant results
			var filtered = results.filter(function(result) {
				var label = result.label || "";
				var description = result.description || "";

				// Skip astronomical objects (Venus crater, etc.)
				if (description.toLowerCase().indexOf('crater') !== -1 ||
					description.toLowerCase().indexOf('asteroid') !== -1 ||
					description.toLowerCase().indexOf('venus') !== -1 ||
					description.toLowerCase().indexOf('moon') !== -1 ||
					description.toLowerCase().indexOf('planet') !== -1) {
					return false;
				}

				// Skip if it's a disambiguation page
				if (description.toLowerCase().indexOf('disambiguation') !== -1 ||
					description.toLowerCase().indexOf('desambiguación') !== -1 ||
					description.toLowerCase().indexOf('desambiguació') !== -1) {
					return false;
				}

			// Include if label contains the search term (case insensitive)
			var searchTermLower = searchName.toLowerCase();
			var labelLower = label.toLowerCase();

			// Exact match or contains the search term
			if (labelLower === searchTermLower || labelLower.indexOf(searchTermLower) !== -1) {
				return true;
			}

			// Also include if description mentions it
			if (description.toLowerCase().indexOf(searchTermLower) !== -1) {
				return true;
			}

			// Include Wikipedia categories that match
			if (labelLower.indexOf('category:') !== -1 && labelLower.indexOf(searchTermLower) !== -1) {
				return true;
			}

			// Include municipality-related items even if they don't exactly match
			if ((description.toLowerCase().indexOf('municipality') !== -1 ||
				 description.toLowerCase().indexOf('municipio') !== -1 ||
				 description.toLowerCase().indexOf('municipi') !== -1) &&
				labelLower.length > 3) {
				return true;
			}

			return false;
			});

			// Sort by relevance
			filtered.sort(function(a, b) {
				var aLabel = (a.label || "").toLowerCase();
				var bLabel = (b.label || "").toLowerCase();
				var aDesc = (a.description || "").toLowerCase();
				var bDesc = (b.description || "").toLowerCase();
				var searchLower = searchName.toLowerCase();

				// Exact matches first
				var aExact = aLabel === searchLower;
				var bExact = bLabel === searchLower;
				if (aExact && !bExact) return -1;
				if (bExact && !aExact) return 1;

				// Municipality/city matches next
				var aIsMunicipality = aDesc.indexOf('municipality') !== -1 || aDesc.indexOf('municipio') !== -1 || aDesc.indexOf('municipi') !== -1 || aDesc.indexOf('city') !== -1 || aDesc.indexOf('ciutat') !== -1 || aDesc.indexOf('ciudad') !== -1;
				var bIsMunicipality = bDesc.indexOf('municipality') !== -1 || bDesc.indexOf('municipio') !== -1 || bDesc.indexOf('municipi') !== -1 || bDesc.indexOf('city') !== -1 || bDesc.indexOf('ciutat') !== -1 || bDesc.indexOf('ciudad') !== -1;

				if (aIsMunicipality && !bIsMunicipality) return -1;
				if (bIsMunicipality && !aIsMunicipality) return 1;

				// Starts with search term
				var aStarts = aLabel.indexOf(searchLower) === 0;
				var bStarts = bLabel.indexOf(searchLower) === 0;
				if (aStarts && !bStarts) return -1;
				if (bStarts && !aStarts) return 1;

				return 0;
			});

			return filtered.slice(0, 10); // Return top 10 most relevant results to include more options
		}

		var wikidataCallbacks = null;

		function showWikidataSelection(results, currentLang, successCallback, errorCallback) {
			wikidataCallbacks = {success: successCallback, error: errorCallback};
			var html = "<div style='background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 15px;'>";
			html += "<h3 style='margin-top: 0; color: #333;'>" + getTranslation('wikidata_multiple_results') + "</h3>";
			html += "<p style='margin-bottom: 15px; color: #666;'>" + getTranslation('wikidata_select_one') + "</p>";
			html += "<div style='display: grid; gap: 10px;'>";

			results.forEach(function(result, index) {
				// Get label in current language or fallback to English
				var label = (result.labels && result.labels[currentLang]) ? result.labels[currentLang].value :
				           (result.labels && result.labels.en) ? result.labels.en.value :
				           result.label || result.id;

				// Get description in current language or fallback to English
				var description = (result.descriptions && result.descriptions[currentLang]) ? result.descriptions[currentLang].value :
				                 (result.descriptions && result.descriptions.en) ? result.descriptions.en.value :
				                 result.description || "";

				html += "<div style='background: #fff; border: 1px solid #ddd; border-radius: 5px; padding: 12px; cursor: pointer; transition: background-color 0.2s;' onclick='selectWikidataResult(\"" + result.id.replace(/"/g, '\\"') + "\")' onmouseover='this.style.backgroundColor=\"#f0f8ff\"' onmouseout='this.style.backgroundColor=\"#fff\"'>";
				html += "<div style='font-weight: bold; color: #0066cc; margin-bottom: 4px;'>" + label + "</div>";
				if (description) {
					html += "<div style='color: #666; font-size: 14px;'>" + description + "</div>";
				}
				html += "<div style='color: #999; font-size: 12px; margin-top: 4px;'>Wikidata: " + result.id + "</div>";
				html += "</div>";
			});

			html += "</div></div>";
			document.getElementById('wikidata-content').innerHTML = html;
		}

		function selectWikidataResult(qid) {
			if (wikidataCallbacks) {
				fetchWikidataEntity(qid, wikidataCallbacks.success, wikidataCallbacks.error);
				wikidataCallbacks = null;
			}
		}

		function fetchWikidataEntity(qid, successCallback, errorCallback) {
			var currentLang = currentLanguage || 'ca';
			// Request data with all language variants and all sitelinks
			var url = "https://www.wikidata.org/w/api.php?action=wbgetentities&ids=" + qid + "&props=labels|descriptions|claims|sitelinks&languages=" + currentLang + "|ca|es|en&format=json&origin=*";

			$.ajax({
				url: url,
				dataType: "json",
				success: function(data) {
					if (data.entities && data.entities[qid]) {
						successCallback(data.entities[qid]);
					} else {
						errorCallback("No s'han trobat dades per a l'element " + qid);
					}
				},
				error: function() {
					errorCallback("Error carregant les dades de l'element Wikidata");
				}
			});
		}

		function displayWikidataInfo(entity, contentDiv, currentLang) {
			var claims = entity.claims || {};
			var html = "<div style='margin-bottom: 20px;'>";

			// Header with title and main image
			html += "<div style='display: flex; align-items: flex-start; margin-bottom: 15px;'>";
			html += "<div style='flex: 1;'>";

			if (entity.labels) {
				var title = entity.labels[currentLang] ? entity.labels[currentLang].value : (entity.labels.en ? entity.labels.en.value : entity.id);
				html += "<h2 style='margin: 0 0 10px 0;'>" + title + "</h2>";
			}

			html += "<p style='margin: 5px 0;'><strong>" + getTranslation('wikidata_item') + "</strong> <a href='https://www.wikidata.org/wiki/" + entity.id + "' target='_blank'>" + entity.id + "</a></p>";

			if (entity.descriptions) {
				var description = entity.descriptions[currentLang] ? entity.descriptions[currentLang].value : (entity.descriptions.en ? entity.descriptions.en.value : "");
				if (description) {
					html += "<p style='margin: 5px 0; font-style: italic;'>" + description + "</p>";
				}
			}

			html += "</div>";

			// Main image
			if (claims.P18 && claims.P18.length > 0) {
				var imageFile = claims.P18[0].mainsnak.datavalue.value;
				var imageUrl = "https://commons.wikimedia.org/wiki/Special:FilePath/" + encodeURIComponent(imageFile) + "?width=200";
				html += "<div style='margin-left: 20px;'><img src='" + imageUrl + "' alt='Image' style='max-width:200px; max-height:150px; border: 1px solid #ccc; border-radius: 4px;'></div>";
			}

			html += "</div></div>";

			// Basic information section
			html += "<div style='background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 15px;'>";
			html += "<h3 style='margin-top: 0; color: #333;'>" + getTranslation('wikidata_basic_info') + "</h3>";
			html += "<div style='display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;'>";

			// Population
			if (claims.P1082 && claims.P1082.length > 0) {
				var population = claims.P1082[0].mainsnak.datavalue.value.amount;
				html += "<div><strong>" + getTranslation('wikidata_population') + "</strong><br>" + parseInt(population).toLocaleString() + "</div>";
			}

			// Area
			if (claims.P2046 && claims.P2046.length > 0) {
				var area = claims.P2046[0].mainsnak.datavalue.value.amount;
				html += "<div><strong>" + getTranslation('wikidata_area') + "</strong><br>" + parseFloat(area).toFixed(2) + " km²</div>";
			}

			// Coordinates
			if (claims.P625 && claims.P625.length > 0) {
				var coords = claims.P625[0].mainsnak.datavalue.value;
				html += "<div><strong>" + getTranslation('wikidata_coordinates') + "</strong><br>" + coords.latitude.toFixed(4) + ", " + coords.longitude.toFixed(4) + "</div>";
			}

			// Elevation
			if (claims.P2044 && claims.P2044.length > 0) {
				var elevation = claims.P2044[0].mainsnak.datavalue.value.amount;
				html += "<div><strong>" + getTranslation('wikidata_elevation') + "</strong><br>" + parseInt(elevation) + " m</div>";
			}

			html += "</div></div>";

			// Flags and symbols
			var hasFlags = false;
			html += "<div style='background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 15px;'>";
			html += "<h3 style='margin-top: 0; color: #333;'>" + getTranslation('wikidata_flags_symbols') + "</h3>";
			html += "<div style='display: flex; gap: 15px; flex-wrap: wrap;'>";

			// Flag
			if (claims.P41 && claims.P41.length > 0) {
				var flagFile = claims.P41[0].mainsnak.datavalue.value;
				var flagUrl = "https://commons.wikimedia.org/wiki/Special:FilePath/" + encodeURIComponent(flagFile) + "?width=100";
				html += "<div><strong>" + getTranslation('wikidata_flag') + "</strong><br><img src='" + flagUrl + "' alt='Flag' style='height: 60px; border: 1px solid #ccc;'></div>";
				hasFlags = true;
			}

			// Coat of arms
			if (claims.P94 && claims.P94.length > 0) {
				var armsFile = claims.P94[0].mainsnak.datavalue.value;
				var armsUrl = "https://commons.wikimedia.org/wiki/Special:FilePath/" + encodeURIComponent(armsFile) + "?width=80";
				html += "<div><strong>" + getTranslation('wikidata_coat_arms') + "</strong><br><img src='" + armsUrl + "' alt='Coat of arms' style='height: 60px; border: 1px solid #ccc;'></div>";
				hasFlags = true;
			}

			if (!hasFlags) {
				html += "<p style='margin: 0; color: #666;'>" + getTranslation('wikidata_no_info') + "</p>";
			}

			html += "</div></div>";

			// Location map
			if (claims.P242 && claims.P242.length > 0) {
				html += "<div style='background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 15px;'>";
				html += "<h3 style='margin-top: 0; color: #333;'>" + getTranslation('wikidata_location_map') + "</h3>";
				var mapFile = claims.P242[0].mainsnak.datavalue.value;
				var mapUrl = "https://commons.wikimedia.org/wiki/Special:FilePath/" + encodeURIComponent(mapFile) + "?width=300";
				html += "<img src='" + mapUrl + "' alt='Location map' style='max-width:100%; border: 1px solid #ccc; border-radius: 4px;'>";
				html += "</div>";
			}

			// Links and websites
			var hasLinks = false;
			html += "<div style='background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 15px;'>";
			html += "<h3 style='margin-top: 0; color: #333;'>" + getTranslation('wikidata_links') + "</h3>";
			html += "<div style='display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;'>";

			// Wikimedia Commons category
			var commonsCategory = "Category:" + title.replace(/ /g, '_');
			html += "<div><strong>Wikimedia Commons</strong><br><a href='https://commons.wikimedia.org/wiki/" + encodeURIComponent(commonsCategory) + "' target='_blank' style='color: #0066cc;'>" + commonsCategory + "</a></div>";

			// Wikipedia category in current language
			var wikiCategory = (currentLang === 'ca' ? 'Categoria:' : currentLang === 'es' ? 'Categoría:' : 'Category:') + title.replace(/ /g, '_');
			var wikiLang = currentLang || 'ca';
			html += "<div><strong>Wikipedia " + getTranslation('wikidata_wikipedia_in').replace('Viquipèdia en ', '').replace('Wikipedia en ', '').replace('Wikipedia in ', '') + "</strong><br><a href='https://" + wikiLang + ".wikipedia.org/wiki/" + encodeURIComponent(wikiCategory) + "' target='_blank' style='color: #0066cc;'>" + wikiCategory + "</a></div>";
			hasLinks = true;

			// Official website
			if (claims.P856 && claims.P856.length > 0) {
				var website = claims.P856[0].mainsnak.datavalue.value;
				html += "<div><strong>" + getTranslation('wikidata_official_website') + "</strong><br><a href='" + website + "' target='_blank' style='color: #0066cc;'>" + website + "</a></div>";
				hasLinks = true;
			}

			// Facebook
			if (claims.P2013 && claims.P2013.length > 0) {
				var facebook = claims.P2013[0].mainsnak.datavalue.value;
				html += "<div><strong>Facebook</strong><br><a href='https://facebook.com/" + facebook + "' target='_blank' style='color: #0066cc;'>/" + facebook + "</a></div>";
				hasLinks = true;
			}

			// Twitter
			if (claims.P2002 && claims.P2002.length > 0) {
				var twitter = claims.P2002[0].mainsnak.datavalue.value;
				html += "<div><strong>Twitter</strong><br><a href='https://twitter.com/" + twitter + "' target='_blank' style='color: #0066cc;'>@" + twitter + "</a></div>";
				hasLinks = true;
			}

			// Instagram
			if (claims.P2003 && claims.P2003.length > 0) {
				var instagram = claims.P2003[0].mainsnak.datavalue.value;
				html += "<div><strong>Instagram</strong><br><a href='https://instagram.com/" + instagram + "' target='_blank' style='color: #0066cc;'>@" + instagram + "</a></div>";
				hasLinks = true;
			}

			html += "</div></div>";

			// Administrative information
			var hasAdmin = false;
			html += "<div style='background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 15px;'>";
			html += "<h3 style='margin-top: 0; color: #333;'>" + getTranslation('wikidata_admin_info') + "</h3>";
			html += "<div style='display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;'>";

			// Country
			if (claims.P17 && claims.P17.length > 0) {
				var countryId = claims.P17[0].mainsnak.datavalue.value.id;
				html += "<div><strong>" + getTranslation('wikidata_country') + "</strong><br><a href='https://www.wikidata.org/wiki/" + countryId + "' target='_blank' style='color: #0066cc;'>" + (claims.P17[0].mainsnak.datavalue.value.labels ? claims.P17[0].mainsnak.datavalue.value.labels[currentLang] || claims.P17[0].mainsnak.datavalue.value.labels.en : countryId) + "</a></div>";
				hasAdmin = true;
			}

			// Administrative division
			if (claims.P131 && claims.P131.length > 0) {
				var adminId = claims.P131[0].mainsnak.datavalue.value.id;
				html += "<div><strong>" + getTranslation('wikidata_admin_division') + "</strong><br><a href='https://www.wikidata.org/wiki/" + adminId + "' target='_blank' style='color: #0066cc;'>" + (claims.P131[0].mainsnak.datavalue.value.labels ? claims.P131[0].mainsnak.datavalue.value.labels[currentLang] || claims.P131[0].mainsnak.datavalue.value.labels.en : adminId) + "</a></div>";
				hasAdmin = true;
			}

			// Postal code
			if (claims.P281 && claims.P281.length > 0) {
				var postalCode = claims.P281[0].mainsnak.datavalue.value;
				html += "<div><strong>" + getTranslation('wikidata_postal_code') + "</strong><br>" + postalCode + "</div>";
				hasAdmin = true;
			}

			if (!hasAdmin) {
				html += "<p style='margin: 0; color: #666; grid-column: 1 / -1;'>" + getTranslation('wikidata_no_admin_info') + "</p>";
			}

			html += "</div></div>";

			// Wikipedia articles
			html += "<div style='background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 15px;'>";
			html += "<h3 style='margin-top: 0; color: #333;'>" + getTranslation('wikidata_wikipedia_articles') + "</h3>";
			html += "<div style='display: flex; flex-wrap: wrap; gap: 10px;'>";

			var sitelinks = entity.sitelinks || {};
			var wikiLinks = [currentLang + 'wiki', 'cawiki', 'eswiki', 'enwiki', 'frwiki', 'itwiki', 'ptwiki'];
			var hasWikiLinks = false;

			wikiLinks.forEach(function(wiki) {
				if (sitelinks[wiki]) {
					var lang = wiki.replace('wiki', '');
					var title = sitelinks[wiki].title;
					var url = "https://" + lang + ".wikipedia.org/wiki/" + encodeURIComponent(title.replace(/ /g, '_'));
					html += "<a href='" + url + "' target='_blank' style='color: #0066cc; text-decoration: underline; margin-right: 15px;'>" + getLanguageName(lang) + " (" + title + ")</a>";
					hasWikiLinks = true;
				}
			});

			if (!hasWikiLinks) {
				html += "<p style='margin: 0; color: #666;'>" + getTranslation('wikidata_no_wikipedia_articles') + "</p>";
			}

			html += "</div></div>";

			contentDiv.innerHTML = html;
		}

		function getTranslatedText(text, lang) {
			var translations = {
				ca: {
					"Error carregant dades de Wikidata: ": "Error carregant dades de Wikidata: ",
					"No s'ha trobat cap element a Wikidata": "No s'ha trobat cap element a Wikidata",
					"Error en la cerca a Wikidata": "Error en la cerca a Wikidata"
				},
				es: {
					"Error carregant dades de Wikidata: ": "Error cargando datos de Wikidata: ",
					"No s'ha trobat cap element a Wikidata": "No se encontró ningún elemento en Wikidata",
					"Error en la cerca a Wikidata": "Error en la búsqueda de Wikidata"
				},
				en: {
					"Error carregant dades de Wikidata: ": "Error loading Wikidata data: ",
					"No s'ha trobat cap element a Wikidata": "No Wikidata item found",
					"Error en la cerca a Wikidata": "Error searching Wikidata"
				}
			};

			return translations[lang] ? translations[lang][text] || text : text;
		}

		function getLanguageName(lang) {
			var langs = {ca: 'català', es: 'espanyol', en: 'anglès', fr: 'francès', it: 'italià', pt: 'portuguès'};
			return langs[lang] || lang;
		}

		// Update Wikipedia content when base location changes
		// This will be called when baseLocation is updated
	  </script>
	  </div>
	  
	  	 	<!--COMMENTS DISQUS-->
	<div class="sidebar-pane" id="comments">
	  <div class="close-button"><span class="fa fa-close" onclick="javascript: sidebar.close()"></span>
	  </div>
	  <!-- MODIFICAR AQUÍ -->
	  	  <h1>Comentaris</h1>
	  	  <!-- START DISQS -->		
		<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
<!--MODIFICAR AQUÍ-->
s.src = 'https://openlocalmap.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<script id="dsq-count-scr" src="//openlocalmap.disqus.com/count.js" async></script>
	  </div>
<!-- FINAL DISQS -->
	  
	  
	  
	<!--MAPA APARCAMENT-->
	<div class="sidebar-pane" id="parking">
	  <div class="close-button"><span class="fa fa-close" onclick="javascript: sidebar.close()"></span>
	  </div>
	  <a name="IniciParking"></a>
	  <h1>Zona Verda a Vilanova i la Geltrú</h1>
	  <center><p><button onclick="refreshIframe();">Carrega el mapa</button></p></center>
	  	<!--MODIFICAR AQUÍ-->
	  <p><iframe name="Aparcament" width="300px" height="400px" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://overpass-turbo.eu/map.html?Q=%2F*%0AThis%20has%20been%20generated%20by%20the%20overpass-turbo%20wizard.%0AThe%20original%20search%20was%3A%0A%E2%80%9Cparking%3Acondition%3Aright%3Aresidents%3D*%E2%80%9D%0A*%2F%0A%5Bout%3Ajson%5D%5Btimeout%3A25%5D%3B%0A%2F%2F%20gather%20results%0A(%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9C%22parking%3Acondition%3Aright%3Aresidents%22%3D*%E2%80%9D%0A%20%20node%5B%22parking%3Acondition%3Aright%3Aresidents%22%5D(41.21222998725971%2C1.7167532444000244%2C41.21716119922773%2C1.725325584411621)%3B%0A%20%20way%5B%22parking%3Acondition%3Aright%3Aresidents%22%5D(41.21222998725971%2C1.7167532444000244%2C41.21716119922773%2C1.725325584411621)%3B%0A%20%20%0A%20%20%20%20way%5B%22parking%3Acondition%3Aleft%3Aresidents%22%5D(41.21222998725971%2C1.7167532444000244%2C41.21716119922773%2C1.725325584411621)%3B%0A%20%20%0A%20%20%20%20%20%20way%5B%22parking%3Acondition%3Aright%3Aresidents%22%5D(41.21222998725971%2C1.7167532444000244%2C41.21716119922773%2C1.725325584411621)%3B%0A%20%20%0A%20%20%20%20%20%20way%5B%22parking%3Acondition%3Aboth%22%5D(41.21222998725971%2C1.7167532444000244%2C41.21716119922773%2C1.725325584411621)%3B%0A%20%20%0A%20%20%20%20%20%20%20%20way%5B%22amenity%22%3D%22parking%22%5D(41.21222998725971%2C1.7167532444000244%2C41.21716119922773%2C1.725325584411621)%3B%0A%20%20%0A%20%20%20%20%20%20%20%20%20%20way%5B%22parking%3Alane%3Aboth%22%3D%22no_stopping%22%5D(41.21222998725971%2C1.7167532444000244%2C41.21716119922773%2C1.725325584411621)%3B%0A%0A)%3B%0A%2F%2F%20print%20results%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0Aout%20body%3B%0A%0A%3E%3B%0A%0Aout%20skel%20qt%3B%7B%7Bstyle%3A%20%20%0A%0Away%5Bamenity%3Dparking%5D%7B%0A%0A%20%20icon-width%3A%2020%3B%0A%0A%20%20icon-image%3A%20url(%27https%3A%2F%2Fgithub.com%2Fyopaseopor%2Fbeta_style_josm%2Fraw%2Fmaster%2Ftraffic_signs_EUR%2FES%2FES_S17.png%27)%3B%0A%0A%20%20text%3A%20name%3B%0A%0A%7D%0A%0Away%5Bparking%3Acondition%3Aleft%3Dticket%5D%5Bparking%3Acondition%3Aleft%3Aresidents%3Dfree%5D%7B%0A%0A%20%20color%3Alime%3B%0A%0A%20%20opacity%3A0.5%3B%0A%0A%20%20%20%20text%3A%20wheelchair%3Adescription%3B%0A%20%20%0A%7D%0A%0Away%5Bparking%3Acondition%3Aright%3Dticket%5D%5Bparking%3Acondition%3Aright%3Aresidents%3Dfree%5D%7B%0A%0A%20%20color%3Agreen%3B%0A%0A%20%20opacity%3A0.5%3B%0A%0A%20%20%20%20text%3A%20wheelchair%3Adescription%3B%0A%20%20%0A%7D%0A%0Away%5Bparking%3Acondition%3Aboth%3Dticket%5D%5Bparking%3Acondition%3Aboth%3Aresidents%3Dfree%5D%7B%0A%0A%20%20color%3Ateal%3B%0A%0A%20%20opacity%3A0.5%3B%0A%0A%20%20%20%20text%3A%20wheelchair%3Adescription%3B%0A%20%20%0A%7D%0A%0Away%5Bparking%3Alane%3Aboth%3Dno_stopping%5D%7B%0A%0A%20%20color%3Ayellow%3B%0A%0A%20%20opacity%3A0.5%3B%0A%0A%20%20%20%20text%3A%20wheelchair%3Adescription%3B%0A%20%20%0A%7D%0A%0A%20%20%7D%7D"></iframe>
	  <center><a href="#IniciParking" data-i18n="parking_back">Torna a l'inici</a></p></center></p>
	  <script>
		function refreshIframe() {
   	 	var ifr = document.getElementsByName('Aparcament')[0];
   	 	ifr.src = ifr.src;
		}
	  </script>
	  </div>
	  
	<!-- ENLLAÇOS D'INTERÈS -->
	<div class="sidebar-pane" id="links">
	<div class="close-button"><span class="fa fa-close" onclick="javascript: sidebar.close()"></span></div>
	  <h1>Enllaços d'interès</h1>
	  <p>
	    <ul>
		<div class="item">
		<li><strong>Comunitat catalana d'OSM:</strong> <a href="https://osmand.net/">OSMcatalà</a>
		  <p style="text-align:justify; margin-right:5px;"><img width="75px" height="75px" align="right" src="assets/img/osmcatala.png">Trobareu informació i detalls sobre la comunitat catalana d'OSM a la pàgina del projecte al wiki d'OSM: <a href="https://wiki.openstreetmap.org/wiki/WikiProject_Catalan" target="_blank">Project Catalan</a>. També podeu interactuar-hi a través de la <a href="https://lists.openstreetmap.org/listinfo/talk-cat" target="_blank">llista de correu</a> o a través del compte <a href="https://twitter.com/osmcatala" target="_blank">@osmcatala</a> a Twitter.</p>
		</li>
	      </div>

		<div class="item">
		<li><strong>OSM al vostre mòbil:</strong> <a href="https://osmand.net/">OsmAnd</a>
		  <p style="text-align:justify; margin-right:5px;"><img width="75px" height="75px" align="right" src="assets/img/osmand.png">L'<b>OsmAnd</b> és una de les aplicacions més completes per utilitzar OpenStreetMap al vostre telèfon intel·ligent, entre les seves funcionalitats en destaca l'ús de mapes fora de línia. L'OsmAnd està disponible per a Android i iPhone. A més a més, l'OsmAnd està completament <a href="https://www.softcatala.org/wiki/Projectes/OsmAnd" target="_blank">traduït al català per Softcatalà</a> i cada dilluns aquesta associació en genera un mapa per l'OsmAnd dels Països Catalans. En trobareu més informació a la <a href="https://www.softcatala.org/wiki/Projectes/Mapes_en_catal%C3%A0" target="_blank">pàgina del projecte</a> i <a href="https://www.softcatala.org/wiki/Projectes/Mapes_en_catal%C3%A0" target="_blank">baixada directa del fitxer</a> (aprox. 270 MB).</p>
		</li>
	      </div>

	      <div class="item">
		<li><strong>Càlcul de rutes:</strong> <a href="https://graphhopper.com/maps/">GraphHopper</a>
		  <p style="text-align:justify; margin-right:5px;"><img hpace="5px" width="75px" height="75px" align="right" src="assets/img/graphhopper.png"><b>GraphHopper</b> us permet obtenir una ruta després de seleccionar un punt de partida i una destinació. A més a més, se li poden afegir punts intermedis. Permet calcular la ruta en cotxe, bicicleta i a peu; s'obté un perfil d'alçades i es pot exportar la ruta a un fitxer GPX.</p>
		</li>
	      </div>
	      <div class="item">
		<li><strong>Mapes per Garmin:</strong> <a href="https://mapas.alternativaslibres.es/descargas.php">alternativaslibres.es</a>
		  <p style="text-align:justify; margin-right:5px;">Mapes preparats per copiar als dispositius Garmin i disposar de tot el poder d'OpenStreetMap al vostre GPS.</p>
		</li>
	      </div>
	      
		<div class="item">
		<li><strong>Creeu els vostres mapes fàcilment:</strong> <a href="https://umap.openstreetmap.fr/es/">uMap</a>
		  <p style="text-align:justify; margin-right:5px;"><img hpace="5px" width="75px" height="75px" align="right" src="assets/img/umap.png"><b>uMap</b> us permet crear mapes amb capes d'OpenStreetMap en un minut i fer-ne un <i>embed</i> (codi HTML generat automàticament per ser inserit) al vostre lloc web.</p>
		</li>
	      </div>

		<div class="item">
		<li><strong>Mapa en 3D:</strong> <a href="https://www.f4map.com/">F4Map</a>
		<!-- MODIFICAR AQUÍ -->
		  <p style="text-align:justify; margin-right:5px;"><img hpace="5px" width="75px" height="75px" align="right" src="assets/img/f4map.png">El lloc web (demo) d'<b>F4Map</b> us permet recrear un escenari d'OpenStreetMap en 3D. A les opcions gràfiques hi podreu seleccionar opcions com utilitzar les dades d'elevació del terreny, l'hora del dia o les condicions climatològiques. El navegador web ha de ser capaç de treballar amb <a href="https://www.khronos.org/webgl/" target="_blank">WebGL</a> per la correcta visualització.<br><br><img width="100%" src="assets/img/f4map-imatge.png"><center><a href="https://demo.f4map.com/#lat=41.2213651&lon=1.7190071&zoom=17&camera.theta=58.483" target="_blank">Ves al mapa de Vilanova i la Geltrú en 3D</a></center></p>
		</li>
	      </div>

	    </ul>
	  </p>
	</div>


	<!-- EXPERT -->
	<div class="sidebar-pane" id="developer">
	  <div class="close-button"><span class="fa fa-close" onclick="javascript: sidebar.close()"></span>
	  </div>
	  <h1>Mode expert</h1>
	  <p style="text-align:justify; margin-right:5px;">Aquest panell mostra la informació de què disposa
	   OpenStreetMap sobre cada element, i facilita enllaços per poder col·laborar amb el projecte.</p>

	  <p style="text-align:justify; margin-right:5px;">Per visualitzar les etiquetes d'un element cal fer
	   clic en algun dels punts d'interès del mapa, després de seleccionar-los des de l'apartat «Punts
	   d'interès».</p>

	  <p style="text-align:justify; margin-right:5px;">També podeu crear la vostra pròpia consulta amb
	  OverpassAPI per cercar un punt d'interès que <em>no
	  sigui</em> a la llista. Per fer-ho cal marcar la casella:</p>

	  <div>
	    <label><input id="expert-mode" type="checkbox"/><span>Consulta personalitzada amb OverpassAPI</span></label>
	    <form id="expert-form" style="display: none;">
	      <input id="expert-query" style="width: 100%;" name="query" type="text" placeholder="[internet_access=wlan][amenity=fuel]"/>
	    </form>
	  </div>
	  <p class="tags"></p>
	 
	<h2>Notes d'OpenStreetMap</h2>
	<p style="text-align:justify; margin-right:5px;">Des d'aquí podreu visualitzar les 
	<a href="https://wiki.openstreetmap.org/wiki/Ca:Notes" target="_blank">notes d'OSM</a> al mapa, i
	 accedir directament a la pàgina d'OSM de la nota. Les notes són anotacions ràpides per notificar
	 d'errors a la zona. Podeu afegir-ne des de la 
	 <!--MODIFICAR AQUÍ-->
	<a href="https://www.openstreetmap.org/#map=9/41.5446/2.0132&layers=N" target="_blank">pàgina d'OSM</a>.
	<p><button type="button" onclick="addnotes();">Mostra notes d'OSM al mapa</button></p>
	<p><button type="button" onclick="clearnotes();">Oculta notes d'OSM al mapa</button></p>
	</div>

	<!--LANGUAGE-->
	<div class="sidebar-pane" id="language">
	  <div class="close-button"><span class="fa fa-close" onclick="javascript: sidebar.close()"></span>
	  </div>
	  <h1 data-i18n="language_title">Idioma</h1>
	  <p data-i18n="language_select">Seleccionar idioma:</p>
	  <center>
	    <button onclick="setLanguage('en')" data-i18n="language_english">English</button>
	    <button onclick="setLanguage('es')" data-i18n="language_spanish">Español</button>
	    <button onclick="setLanguage('ca')" data-i18n="language_catalan">Català</button>
	  </center>
	</div>

	<!--QUANT A-->
	<div class="sidebar-pane" id="about">
	  <div class="close-button"><span class="fa fa-close" onclick="javascript: sidebar.close()"></span>
	  </div>
	  <h1>Quant a...</h1>
	  <!--MODIFICAR AQUÍ-->
	  <p style="text-align:justify; margin-right:5px;"><img align="right" src="assets/img/konfraria.jpeg">Aquest és un mapa de la nostra ciutat creat a partir d'un projecte de l'associació sense ànim de lucre <a href="https://www.konfraria.org" target="_blank">la Konfraria de la Vila del Pingüí de la Palma (de Cervelló)</a>, que a més a més ha participat activament en el grup d'<a href="https://wiki.openstreetmap.org/wiki/WikiProject_Catalan" target="_blank">OSM en català</a> així com en la incorporació de dades al mapa de la Palma de Cervelló al projecte <a href="" target="_blank">OpenStreetMap</a>. Trobareu un resum de les activitats més rellevants a la <a href="https://wiki.openstreetmap.org/wiki/User:KonfrareAlbert" target="_blank">pàgina de l'usuari KonfrareAlbert</a>, i també informació sobre la importació del cadastre a la pàgina de <a href="https://wiki.openstreetmap.org/wiki/Palma_de_Cervell%C3%B3" target="_blank">la Palma de Cervelló al wiki d'OSM</a>. Trobareu més informació sobre la Konfraria, i el nostre contacte en <a href="https://www.lapalmadecervello.cat/entitats/cultura/la-konfraria-de-la-vila-del-pingui" target="_blank">aquest enllaç</a>.</p>

	  <p style="text-align:justify; margin-right:5px;"><img align="right" src="assets/img/github.png"><b>Codi del projecte:</b><br><a href="https://github.com/osm-catalan/openlocalmap" target="_blank">OpenLocalMap</a> (llicència GPL) a GitHub.</p>

	  <p style="text-align:justify; margin-right:5px;">Aquest lloc web és un <i><a href="https://ca.wikipedia.org/wiki/Fork" target="_blank">fork</a></i> del projecte <b>osm-pois</b> de <b><i>Manuel Kaufmann</b></i>, del que n'hem aprofitat gran part del codi (<a href="https://upoi.org" target="_blank">POIs</a> al blog d'Humitos, codi d'osm-pois a <a href="https://github.com/humitos/osm-pois" target="_blank">GitHub</a> amb llicència <a href="https://www.gnu.org/licenses/gpl-2.0.html" target="_blank">GPL</a>, Twitter: <a href="https://twitter.com/reydelhumo" target="_blank">@reydelhumo</a>).</p>

	 <p>Eines que s'utilitzen per fer funcionar aquest lloc web:</p>

	  <ul class="item">
	    <li><a href="https://leafletjs.com/" target="_blank">Leafletjs</a> © Vladimir Agafonkin</li>
	    <li>Connectors de Leaflet:
	      <ol>
		<li><a href="https://github.com/ebrelsford/Leaflet.loading" target="_blank">Leaflet.loading</a> © Eric Brelsford</li>
		<li><a href="https://github.com/Turbo87/sidebar-v2/" target="_blank">L.control.sidebar</a> © Tobias Bieniek</li>
		<li><a href="https://www.mapbox.com/mapbox.js/plugins/#leaflet-locatecontrol" target="_blank">L.Control.Locate</a> © Mapbox</li>
		<li><a href="https://github.com/makinacorpus/Leaflet.RestoreView" target="_blank">Leaflet.RestoreView</a> © Makina Corpus</li>
		<li><a href="https://github.com/kartenkarsten/leaflet-layer-overpass" target="_blank">L.OverPassLayer</a> © kartenkarsten</li>
		<li><a href="https://github.com/mlevans/leaflet-hash" target="_blank">L.Hash</a> © Michael Lawrence Evans</li>
		<li><a href="https://github.com/Leaflet/Leaflet.label" target="_blank">Leaflet.label</a> © Leaflet</li>
		<li><a href="https://github.com/osmlab/leaflet-osm-notes" target="_blank">Leaflet-osm-notes</a> © Tom MacWright</li>
		<li><a href="https://github.com/torfuspolymorphus/leaflet.zoomhome" target="_blank">Leaflet.zoomhome</a> © Torf</li>
		<li><a href="https://github.com/rowanwins/leaflet-easyPrint" target="_blank">leaflet-easyPrint</a> © Rowan Winsemius</li>
		<li><a href="https://github.com/mpetazzoni/leaflet-gpx" target="_blank">leaflet-gpx</a> © Maxime Petazzoni</li>
		<li><a href="https://github.com/MrMufflon/Leaflet.Elevation" target="_blank">Leaflet.elevation</a> © Felix Bache</li>
		<li><a href="https://github.com/ypid/opening_hours.js" target="_blank">opening_hours.js</a> © Robin Schneider</li>
	      </ol>
	    </li>
	    <li><a href="https://fortawesome.github.io/Font-Awesome/" target="_blank">Font-Awesome</a> © Dave Gandy</li>
	    <li><a href="https://mapicons.nicolasmollet.com/" target="_blank">Map Icons</a> © Nicolas Mollet</li>
	    <li><a href="https://jquery.com" target="_blank">jQuery</a> © The jQuery Foundation</li>
	    <li><a href="https://github.com/medialize/URI.js" target="_blank">URI.js</a> © Medialize</li>
	    <li><a href="https://github.com/janl/mustache.js" target="_blank">Mustache</a> © Jan Lehnardt</li>
	    <li><a href="https://www.mapillary.com/" target="_blank">Mapillary</a> © Mapillary</li>
	    <li><a href="https://graphhopper.com/" target="_blank">Graphhopper</a> © Graphhopper</li>
	  </ul>

	  <p style="text-align:justify; margin-right:5px;">També cal agrair a <b>Konfrare Albert (que és qui ha permés la personalització extrema de la seva eina)</b>  ,  (<a href="https://twitter.com/la_konfraria" target="_blank">@la_konfraria</a>) , <b>Xavier Barnada</b> (<a href="https://twitter.com/Xevib" target="_blank">@Xevib</a>) i a <b>Marco Antonio</b> (<a href="https://twitter.com/51114u9" target="_blank">@51114u9</a>) la seva ajuda i contribucions.</p>
	  <p style="text-align:justify; margin-right:5px;">Per últim remarcar que NO TENIM RES A VEURE ni AMB l'organització d'OPENSTREETMAP ni pretenem fer servir la seva marca.</p>
	  <p style="text-align:justify; margin-right:5px;">Sense aquestes eines i ajudes seria impossible que funcionés aquest lloc web, a tots ells, moltes gràcies.</p>
      
	</div>
       </div>
      </div>
    </div>

    <div id="map" class="sidebar-map"></div>

    <div id="spinner" style="display: none;">
      <img src="assets/img/spinner.gif">
    </div>

    <!-- Javascripts -->
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="assets/leaflet/leaflet.js"></script>
    <script src="assets/js/thunderforest.js"></script>
    <script src="assets/js/leaflet-osm-notes.js"></script>
    <script src="assets/js/leaflet.zoomhome.js"></script>
    <script src="assets/js/leaflet.label.js"></script>
    <script src="assets/js/leaflet.restoreview.js"></script>
    <script src="assets/js/leaflet-sidebar.js"></script>
    <script src="assets/js/Control.Loading.js"></script>
    <script src="https://code.jquery.com/jquery-1.8.0.min.js"></script>
    <script src="assets/print/jQuery.print.js"></script>
    <script src="assets/print/leaflet.easyPrint.js"></script>
    <script src="assets/js/leaflet.elevation-0.0.4.src.js"></script>
    <script src="assets/js/gpx.js"></script>  
    <script src="assets/js/URI.js"></script>
    <script src="assets/js/suncalc.js"></script>
    <script src="assets/js/opening_hours.js"></script> 
    <script src="assets/js/OverPassLayer.js"></script>
    <script src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.24.0/L.Control.Locate.js"></script>
    <script src="assets/js/leaflet-hash.js"></script>
    <script src="assets/js/mustache.js"></script>
    <script src="assets/js/tags-parsers.js"></script>
    <script src="assets/js/pois-type.js"></script>
    <script src="assets/js/routes-manager.js"></script>
    <script src="assets/js/site.functions.js"></script>
    <script src="assets/js/translations.js"></script>
    <script src="assets/js/site.js"></script>

  </body>
</html>
